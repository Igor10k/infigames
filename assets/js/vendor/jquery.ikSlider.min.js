(function(e,t,n){function i(t,n){this.el=t;this.$el=e(t);this.options=e.extend({},r,n);this.init()}var r={initialProgress:0};e.extend(i.prototype,{init:function(){this.$el.addClass("ikslider");this.$bar=e('<div class="ikslider-bar"/>');this.$seeker=e('<div class="ikslider-seeker"/>');this.$el.append(this.$bar,this.$seeker);this.barWidth=this.$bar.outerWidth(true);this.seekerWidth=this.$seeker.outerWidth(true);this.$el.on("mousedown.ikSlider touchstart.ikSlider",e.proxy(this,"startDragging"));if(this.options.initialProgress){this.setProgress(this.options.initialProgress)}},getMouseX:function(e){var t,n;n=this.$el.offset();if(e.originalEvent.touches){t=e.originalEvent.touches[0].pageX}else{t=e.pageX}t-=n.left;return t},moveSeeker:function(e){e=e-Math.floor(this.seekerWidth/2);if(e<0){e=0}else if(e+this.seekerWidth>this.barWidth){e=this.barWidth-this.seekerWidth}this.$seeker.css("left",e);this.progress=e/(this.barWidth-this.seekerWidth)},startDragging:function(t){e(n).on("mousemove.ikSlider touchmove.ikSlider",e.proxy(this,"dragging"));e(n).on("mouseup.ikSlider touchend.ikSlider",e.proxy(this,"stopDragging"));this.moveSeeker(this.getMouseX(t));this.$el.trigger("start",this);return false},dragging:function(e){this.moveSeeker(this.getMouseX(e));this.$el.trigger("dragging",this);return false},stopDragging:function(){e(n).off("mousemove.ikSlider touchmove.ikSlider");e(n).off("mouseup.ikSlider touchend.ikSlider");this.$el.trigger("stop",this);return false},setProgress:function(e){this.moveSeeker((this.barWidth-this.seekerWidth)*e+this.seekerWidth/2)}});e.fn.ikSlider=function(t){return this.each(function(){if(!e.data(this,"plugin_ikSlider")){e.data(this,"plugin_ikSlider",new i(this,t))}})}})(jQuery,window,document)
