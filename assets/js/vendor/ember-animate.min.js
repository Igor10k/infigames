(function(){var e,t;var e=function(e){if(e&&typeof e==="function"){return e()}};Ember.View.reopen({isAnimatingIn:false,isAnimatingOut:false,hasAnimatedIn:false,hasAnimatedOut:false,_animateInCallbacks:null,_animateOutCallbacks:null,_afterRender:function(){var t=this;this.$el=this.$();this._transitionTo=this._transitionTo||this.transitionTo;if(!t.isDestroyed){t.willAnimateIn();t.isAnimatingIn=true;t.hasAnimatedIn=false;Ember.run.next(function(){if(!t.isDestroyed){t.animateIn(function(){var n;t.isAnimatingIn=false;t.hasAnimatedIn=true;t.didAnimateIn();if(t._animateInCallbacks&&t._animateInCallbacks.length){for(n=0;n<t._animateInCallbacks.length;n++){e(t._animateInCallbacks[n])}}t._animateInCallbacks=null})}})}},willInsertElement:function(){Ember.run.scheduleOnce("afterRender",this,this._afterRender);return this._super()},willAnimateIn:Ember.K,willAnimateOut:Ember.K,didAnimateIn:Ember.K,didAnimateOut:Ember.K,animateIn:e,animateOut:e,onAnimateIn:function(e){this._animateInCallbacks=this._animateInCallbacks||[];if(typeof e==="function"){this._animateInCallbacks.push(e)}},onAnimateOut:function(e){this._animateOutCallbacks=this._animateOutCallbacks||[];if(typeof e==="function"){this._animateOutCallbacks.push(e)}},destroy:function(t){var n=this._super;this.onAnimateOut(t);if(this.isAnimatingOut){return}if(!this.$el||this.isDestroyed){if(this._animateOutCallbacks&&this._animateOutCallbacks.length){for(i=0;i<this._animateOutCallbacks.length;i++){e(this._animateOutCallbacks[i])}}this._animateOutCallbacks=null;return n.call(this)}if(!this.$()){this.$=function(){return this.$el}}this.willAnimateOut();this.isAnimatingOut=true;this.animateOut(function(){this.isAnimatingOut=false;this.hasAnimatedOut=true;this.didAnimateOut();if(this._animateOutCallbacks&&this._animateOutCallbacks.length){for(i=0;i<this._animateOutCallbacks.length;i++){e(this._animateOutCallbacks[i])}}this.isDestroying=false;n.call(this);if(this._parentView){this._parentView.removeChild(this)}this.isDestroying=true;this._transitionTo("destroying",false);delete this.$;delete this.$el;return this}.bind(this));return this}});Ember.ContainerView.reopen({currentView:null,activeView:null,newView:null,nextView:null,animationSequence:"sync",init:function(){var e;this._super();if(e=this.get("currentView")){this.set("activeView",e)}},_currentViewWillChange:Ember.K,_currentViewDidChange:Ember.observer("currentView",function(){function i(t){if(t){e.pushObject(t)}e.set("activeView",t)}function s(e){if(e.isAnimatingOut){return}if(!e.hasAnimatedIn){e.onAnimateIn(e.destroy.call(e));return}e.destroy()}var e,t,n,r;e=this;n=this.get("activeView");t=this.get("currentView");this.set("newView",t);if(n){if(this.animationSequence==="reverse"){t.onAnimateIn(function(){s(n)});i(t)}else if(this.animationSequence==="async"){s(n);i(t)}else{n.onAnimateOut(function(){i(e.get("currentView"))});s(n)}}else{i(t)}})})})()
